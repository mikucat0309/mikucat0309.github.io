<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Articles on 貓咪的梳妝台</title>
        <link>https://blog.mikuc.at/article/</link>
        <description>Recent content in Articles on 貓咪的梳妝台</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-tw</language>
        <lastBuildDate>Fri, 15 Apr 2022 22:50:00 +0800</lastBuildDate><atom:link href="https://blog.mikuc.at/article/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Awesome Open Source Kubernetes Distribution &amp; OS</title>
        <link>https://blog.mikuc.at/article/awesome-k8s-distro-os/</link>
        <pubDate>Fri, 15 Apr 2022 22:50:00 +0800</pubDate>
        
        <guid>https://blog.mikuc.at/article/awesome-k8s-distro-os/</guid>
        <description>&lt;h1 id=&#34;awesome-open-source-kubernetes-distribution--os&#34;&gt;Awesome Open Source Kubernetes Distribution &amp;amp; OS&lt;/h1&gt;
&lt;h2 id=&#34;distributions&#34;&gt;Distributions&lt;/h2&gt;
&lt;h3 id=&#34;k3shttpsgithubcomk3s-iok3s&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/k3s-io/k3s&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;K3s&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: CNCF&lt;/li&gt;
&lt;li&gt;tags: lightweight, single-package&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An great out-of-the-box distro suitable for home lab or IoT.&lt;/p&gt;
&lt;p&gt;Strip all functions that can be done through plugins,
pre-installed klipper load balancer, traefik ingress controller.&lt;/p&gt;
&lt;h3 id=&#34;k0shttpsgithubcomk0sprojectk0s&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/k0sproject/k0s&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;K0s&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Mirantis&lt;/li&gt;
&lt;li&gt;tags: lightweight, single-package&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Another great out-of-the-box distro suitable for home lab or IoT.
Both K3s and K0s target on lightweight distribution,
but K0s preserved upstream cloud supports like GCP, AWS and Azure,
and it doesn&amp;rsquo;t pre-install load balancer and ingress controller.&lt;/p&gt;
&lt;h3 id=&#34;microk8shttpsgithubcomcanonicalmicrok8s&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/canonical/microk8s&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MicroK8s&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Canonical&lt;/li&gt;
&lt;li&gt;tags: lightweight, single-package&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;typhoonhttpsgithubcomposeidontyphoon&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/poseidon/typhoon&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Typhoon&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Poseidon Labs&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;vclusterhttpsgithubcomloft-shvcluster&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/loft-sh/vcluster&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;vcluster&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Loft Labs&lt;/li&gt;
&lt;li&gt;tags: virtual, multi-cluster, testing, in-namespace&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rancherhttpsgithubcomrancherrancher&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/rancher/rancher&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Rancher&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Rancher Labs&lt;/li&gt;
&lt;li&gt;tags: hybird-cloud&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;rke2httpsgithubcomrancherrke2&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/rancher/rke2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RKE2&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Rancher Labs&lt;/li&gt;
&lt;li&gt;tags: security, government-compliance&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;deckhousehttpsgithubcomdeckhousedeckhouse&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/deckhouse/deckhouse&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Deckhouse&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Flant&lt;/li&gt;
&lt;li&gt;tags: user-friendly, enterprise&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;kubecubehttpsgithubcomkubecube-iokubecube&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/kubecube-io/KubeCube&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;KubeCube&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: KubeCube Authors&lt;/li&gt;
&lt;li&gt;tags: multi-cluster, user-friendly, enterprise&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;kubespherehttpsgithubcomkubespherekubesphere&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/kubesphere/kubesphere&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;KubeSphere&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: CNCF&lt;/li&gt;
&lt;li&gt;tags: multi-cluster, user-friendly, enterprise&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tanzu-community-editionhttpsgithubcomvmware-tanzucommunity-edition&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/vmware-tanzu/community-edition&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Tanzu Community Edition&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: VMware&lt;/li&gt;
&lt;li&gt;tags: user-friendly&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;metalk8shttpsgithubcomscalitymetalk8s&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/scality/metalk8s&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MetalK8s&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Scality&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;kubernetes-fury-distribution-kfdhttpsgithubcomsighupiofury-distribution&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/sighupio/fury-distribution&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes Fury Distribution (KFD)&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: SIGHUP&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;charmed-kuberneteshttpsgithubcomcharmed-kubernetesbundle&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/charmed-kubernetes/bundle&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Charmed Kubernetes&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;maintainer: Canonical&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;optimized-operating-system&#34;&gt;Optimized Operating System&lt;/h2&gt;
&lt;h3 id=&#34;taloshttpsgithubcomsiderolabstalos&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/siderolabs/talos&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Talos&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Using gRPC to control operating system, that says, no interactive shell.
Root filesystem is a immutable image, and upgrade through A/B upgrade.&lt;/p&gt;
&lt;h3 id=&#34;flatcar-linuxhttpsgithubcomflatcar-linuxflatcar&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/flatcar-linux/Flatcar&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Flatcar Linux&lt;/a&gt;&lt;/h3&gt;
&lt;h2 id=&#34;license&#34;&gt;License&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://creativecommons.org/publicdomain/zero/1.0&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/cc-zero.svg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;CC0&#34;
	
	
&gt;&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>在 Proxmox VE LXC 運行 Kubernetes 節點</title>
        <link>https://blog.mikuc.at/article/k8s_in_lxc/</link>
        <pubDate>Tue, 22 Feb 2022 00:10:55 +0800</pubDate>
        
        <guid>https://blog.mikuc.at/article/k8s_in_lxc/</guid>
        <description>&lt;h2 id=&#34;環境&#34;&gt;環境&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;HP 8200 Elite (Core i7-2600 / DDR3 16 GB)&lt;/li&gt;
&lt;li&gt;Proxmox VE 7.1-10&lt;/li&gt;
&lt;li&gt;Debian 11 LXC from &lt;a class=&#34;link&#34; href=&#34;https://jenkins.linuxcontainers.org/view/Images/job/image-debian/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;linuxcontainers.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;k0s v1.23.3+k0s&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;pve-設定&#34;&gt;PVE 設定&lt;/h2&gt;
&lt;p&gt;確認必要核心模組，已啟用會輸出 1&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat /proc/sys/net/bridge/bridge-nf-call-iptables
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;禁用 swap&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sysctl vm.swappiness&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;swapoff -a
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;開啟 IP 轉送&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;net.ipv4.ip_forward=1&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sysctl --system
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;lxc-設定&#34;&gt;LXC 設定&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;創建 LXC 並取消勾選 &lt;code&gt;Unprivileged container&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;開啟 PVE shell&lt;/li&gt;
&lt;li&gt;編輯 &lt;code&gt;/etc/pve/lxc/&amp;lt;ID&amp;gt;.conf&lt;/code&gt; ， &lt;code&gt;&amp;lt;ID&amp;gt;&lt;/code&gt; 替換成 LXC 編號&lt;/li&gt;
&lt;li&gt;將以下設定貼在 LXC 設定檔&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;lxc.apparmor.profile: unconfined
lxc.cgroup.devices.allow: a
lxc.cap.drop:
lxc.mount.auto: &amp;#34;proc:rw sys:rw&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;存檔並啟動 LXC&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;修復-kubernetes-devkmsg-no-such-file-or-directory-錯誤&#34;&gt;修復 Kubernetes &lt;code&gt;/dev/kmsg: no such file or directory&lt;/code&gt; 錯誤&lt;/h2&gt;
&lt;p&gt;在 LXC 裡執行以下指令&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt;/etc/init.d/fix-kmsg &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;#!/bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;ln -s /dev/console /dev/kmsg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;755&lt;/span&gt; /etc/init.d/fix-kmsg
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/etc/init.d/fix-kmsg
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;接著就可以正常在 LXC 安裝 Kubernetes 了！&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
